{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Mehemmed/Desktop/Code{1}/Projects/handcraft/src/main/handcraft-react/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Mehemmed/Desktop/Code{1}/Projects/handcraft/src/main/handcraft-react/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Mehemmed/Desktop/Code{1}/Projects/handcraft/src/main/handcraft-react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{Link}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var MessageList=function MessageList(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),messages=_useState2[0],setMessages=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),messageError=_useState4[0],setMessageError=_useState4[1];useEffect(function(){var fetchMessages=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var url,request,requestJson;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:url=\"http://localhost:8080/api/messages?sort=createdAt,desc\";_context.next=3;return fetch(url);case 3:request=_context.sent;if(request.ok){_context.next=6;break;}throw new Error(\"Something went wrong!\");case 6:_context.next=8;return request.json();case 8:requestJson=_context.sent;setMessages(requestJson._embedded.messages);case 10:case\"end\":return _context.stop();}},_callee);}));return function fetchMessages(){return _ref.apply(this,arguments);};}();fetchMessages().catch(function(e){return setMessageError(e.message);});},[]);return/*#__PURE__*/_jsx(_Fragment,{children:messages.map(function(message,index){return/*#__PURE__*/_jsx(\"div\",{className:\"inbox-item\",children:/*#__PURE__*/_jsxs(Link,{to:\"/messageadmin:\".concat(message.messageId),children:[/*#__PURE__*/_jsx(\"div\",{className:\"inbox-item-img\",children:/*#__PURE__*/_jsx(\"img\",{src:require(\"../../../Assets/Images/user_icon.png\"),className:\"rounded-circle\",alt:\"\"})}),/*#__PURE__*/_jsx(\"h5\",{className:\"inbox-item-author mt-0 mb-1\",children:message.messageSenderName}),/*#__PURE__*/_jsx(\"h6\",{children:message.messageTitle}),/*#__PURE__*/_jsx(\"p\",{className:\"inbox-item-text\",children:message.messageBody.length>50?\"\".concat(message.messageBody.slice(0,50),\"...\"):message.messageBody}),/*#__PURE__*/_jsx(\"p\",{className:\"inbox-item-date\",children:message.createdAt.slice(0,16)})]})},index);})});};export default MessageList;","map":{"version":3,"names":["React","useEffect","useState","Link","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","MessageList","_useState","_useState2","_slicedToArray","messages","setMessages","_useState3","_useState4","messageError","setMessageError","fetchMessages","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","url","request","requestJson","wrap","_callee$","_context","prev","next","fetch","sent","ok","Error","json","_embedded","stop","apply","arguments","catch","e","message","children","map","index","className","to","concat","messageId","src","require","alt","messageSenderName","messageTitle","messageBody","length","slice","createdAt"],"sources":["C:/Users/Mehemmed/Desktop/Code{1}/Projects/handcraft/src/main/handcraft-react/src/Admin/Components/Messages/MessageList.tsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport MessageModel from \"../../../Models/MessageModel\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst MessageList = () => {\r\n  const [messages, setMessages] = useState<MessageModel[]>([]);\r\n  const [messageError, setMessageError] = useState(\"\");\r\n  useEffect(() => {\r\n    const fetchMessages = async () => {\r\n      const url = \"http://localhost:8080/api/messages?sort=createdAt,desc\";\r\n      const request = await fetch(url);\r\n      if (!request.ok) {\r\n        throw new Error(\"Something went wrong!\");\r\n      }\r\n      const requestJson = await request.json();\r\n      setMessages(requestJson._embedded.messages);\r\n    };\r\n    fetchMessages().catch((e: any) => setMessageError(e.message));\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      {messages.map((message: MessageModel, index: number) => (\r\n        <div key={index} className=\"inbox-item\">\r\n          <Link to={`/messageadmin:${message.messageId}`}>\r\n            <div className=\"inbox-item-img\">\r\n              <img\r\n                src={require(\"../../../Assets/Images/user_icon.png\")}\r\n                className=\"rounded-circle\"\r\n                alt=\"\"\r\n              />\r\n            </div>\r\n            <h5 className=\"inbox-item-author mt-0 mb-1\">{message.messageSenderName}</h5>\r\n            <h6>{message.messageTitle}</h6>\r\n            <p className=\"inbox-item-text\">{message.messageBody.length > 50 ? `${message.messageBody.slice(0,50)}...` : message.messageBody}</p>\r\n            <p className=\"inbox-item-date\">{message.createdAt.slice(0,16)}</p>\r\n          </Link>\r\n        </div>\r\n      ))}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default MessageList;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}