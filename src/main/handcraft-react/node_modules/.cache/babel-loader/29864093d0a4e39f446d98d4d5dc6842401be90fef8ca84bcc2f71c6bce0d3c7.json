{"ast":null,"code":"import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nexport const getCardItems = createAsyncThunk(\"cart/getCartItems\", async () => {\n  const url = \"http://localhost:8080/api/products\";\n  return fetch(url).then(response => response.json().then(dataJson => dataJson._embedded.products)).catch(err => console.log(err));\n});\nconst initialState = {\n  cartItems: [{\n    items: [],\n    count: 0\n  }],\n  amount: 5,\n  total: 0,\n  isLoadingCart: true\n};\nconst cartSlice = createSlice({\n  name: \"cart\",\n  initialState,\n  reducers: {\n    clearCard: state => {\n      state.cartItems = [{\n        items: [],\n        count: 0\n      }];\n    },\n    removeItem: (state, action) => {\n      const itemId = action.payload;\n      state.cartItems = [{\n        items: state.cartItems[0].items.filter(x => x.productId !== itemId),\n        count: 0\n      }];\n    },\n    // cartItems = [{productId,n,p,...}]\n    calculateTotals: state => {\n      let total = 0;\n      state.cartItems[0].items.forEach(item => {\n        total += item.price * item.price;\n      });\n      // state.amount = amount;\n      state.total = total;\n    }\n  },\n  extraReducers: {\n    [String(getCardItems.pending)]: state => {\n      state.isLoadingCart = true;\n    },\n    [String(getCardItems.fulfilled)]: (state, action) => {\n      state.isLoadingCart = false;\n      state.cartItems = [{\n        items: action.payload,\n        count: 0\n      }];\n    },\n    [String(getCardItems.rejected)]: state => {\n      state.isLoadingCart = true;\n    }\n  }\n});\nexport const {\n  clearCard,\n  removeItem,\n  calculateTotals\n} = cartSlice.actions;\nexport default cartSlice.reducer;","map":{"version":3,"names":["createAsyncThunk","createSlice","getCardItems","url","fetch","then","response","json","dataJson","_embedded","products","catch","err","console","log","initialState","cartItems","items","count","amount","total","isLoadingCart","cartSlice","name","reducers","clearCard","state","removeItem","action","itemId","payload","filter","x","productId","calculateTotals","forEach","item","price","extraReducers","String","pending","fulfilled","rejected","actions","reducer"],"sources":["C:/Users/Mehemmed/Desktop/Code{1}/Projects/handcraft/src/main/handcraft-react/src/Cart/cartSlice.ts"],"sourcesContent":["import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\r\nimport ProductModel from \"../Models/ProductModel\";\r\n\r\nexport const getCardItems = createAsyncThunk(\"cart/getCartItems\", async() => {\r\n  const url = \"http://localhost:8080/api/products\";\r\n  return fetch(url)\r\n    .then((response) =>\r\n      response.json().then((dataJson) => dataJson._embedded.products)\r\n    )\r\n    .catch((err) => console.log(err));\r\n});\r\n\r\n\r\nconst initialState = {\r\n  cartItems: [{items:[],count:0}],\r\n  amount: 5,\r\n  total: 0,\r\n  isLoadingCart: true,\r\n};\r\n\r\nconst cartSlice = createSlice({\r\n  name: \"cart\",\r\n  initialState,\r\n  reducers: {\r\n    clearCard:(state:any)=>{\r\n        state.cartItems=[\r\n          {\r\n            items:[],\r\n            count:0\r\n          }\r\n        ]\r\n    },\r\n    removeItem:(state:any,action)=>{\r\n      const itemId = action.payload\r\n      state.cartItems=[\r\n        {items:state.cartItems[0].items.filter((x:any)=> x.productId !== itemId),count:0}\r\n      ]\r\n    },\r\n\r\n    // cartItems = [{productId,n,p,...}]\r\n    calculateTotals:(state:any)=>{\r\n      let total = 0;\r\n      state.cartItems[0].items.forEach((item:ProductModel) => {\r\n        total += item.price * item.price;\r\n      });\r\n      // state.amount = amount;\r\n      state.total = total;\r\n    }\r\n  },\r\n  extraReducers:{\r\n    [String(getCardItems.pending)]:(state:any)=>{\r\n        state.isLoadingCart=true\r\n    },\r\n    [String(getCardItems.fulfilled)]:(state:any,action)=>{\r\n        state.isLoadingCart=false;\r\n        state.cartItems = [{\r\n          items:action.payload,\r\n          count:0\r\n        }]\r\n    },\r\n    [String(getCardItems.rejected)]:(state:any)=>{\r\n        state.isLoadingCart=true;\r\n    }\r\n  }\r\n});\r\nexport const{clearCard,removeItem,calculateTotals}= cartSlice.actions;\r\nexport default cartSlice.reducer;\r\n"],"mappings":"AAAA,SAASA,gBAAgB,EAAEC,WAAW,QAAQ,kBAAkB;AAGhE,OAAO,MAAMC,YAAY,GAAGF,gBAAgB,CAAC,mBAAmB,EAAE,YAAW;EAC3E,MAAMG,GAAG,GAAG,oCAAoC;EAChD,OAAOC,KAAK,CAACD,GAAG,CAAC,CACdE,IAAI,CAAEC,QAAQ,IACbA,QAAQ,CAACC,IAAI,CAAC,CAAC,CAACF,IAAI,CAAEG,QAAQ,IAAKA,QAAQ,CAACC,SAAS,CAACC,QAAQ,CAChE,CAAC,CACAC,KAAK,CAAEC,GAAG,IAAKC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC,CAAC;AACrC,CAAC,CAAC;AAGF,MAAMG,YAAY,GAAG;EACnBC,SAAS,EAAE,CAAC;IAACC,KAAK,EAAC,EAAE;IAACC,KAAK,EAAC;EAAC,CAAC,CAAC;EAC/BC,MAAM,EAAE,CAAC;EACTC,KAAK,EAAE,CAAC;EACRC,aAAa,EAAE;AACjB,CAAC;AAED,MAAMC,SAAS,GAAGrB,WAAW,CAAC;EAC5BsB,IAAI,EAAE,MAAM;EACZR,YAAY;EACZS,QAAQ,EAAE;IACRC,SAAS,EAAEC,KAAS,IAAG;MACnBA,KAAK,CAACV,SAAS,GAAC,CACd;QACEC,KAAK,EAAC,EAAE;QACRC,KAAK,EAAC;MACR,CAAC,CACF;IACL,CAAC;IACDS,UAAU,EAACA,CAACD,KAAS,EAACE,MAAM,KAAG;MAC7B,MAAMC,MAAM,GAAGD,MAAM,CAACE,OAAO;MAC7BJ,KAAK,CAACV,SAAS,GAAC,CACd;QAACC,KAAK,EAACS,KAAK,CAACV,SAAS,CAAC,CAAC,CAAC,CAACC,KAAK,CAACc,MAAM,CAAEC,CAAK,IAAIA,CAAC,CAACC,SAAS,KAAKJ,MAAM,CAAC;QAACX,KAAK,EAAC;MAAC,CAAC,CAClF;IACH,CAAC;IAED;IACAgB,eAAe,EAAER,KAAS,IAAG;MAC3B,IAAIN,KAAK,GAAG,CAAC;MACbM,KAAK,CAACV,SAAS,CAAC,CAAC,CAAC,CAACC,KAAK,CAACkB,OAAO,CAAEC,IAAiB,IAAK;QACtDhB,KAAK,IAAIgB,IAAI,CAACC,KAAK,GAAGD,IAAI,CAACC,KAAK;MAClC,CAAC,CAAC;MACF;MACAX,KAAK,CAACN,KAAK,GAAGA,KAAK;IACrB;EACF,CAAC;EACDkB,aAAa,EAAC;IACZ,CAACC,MAAM,CAACrC,YAAY,CAACsC,OAAO,CAAC,GAAGd,KAAS,IAAG;MACxCA,KAAK,CAACL,aAAa,GAAC,IAAI;IAC5B,CAAC;IACD,CAACkB,MAAM,CAACrC,YAAY,CAACuC,SAAS,CAAC,GAAE,CAACf,KAAS,EAACE,MAAM,KAAG;MACjDF,KAAK,CAACL,aAAa,GAAC,KAAK;MACzBK,KAAK,CAACV,SAAS,GAAG,CAAC;QACjBC,KAAK,EAACW,MAAM,CAACE,OAAO;QACpBZ,KAAK,EAAC;MACR,CAAC,CAAC;IACN,CAAC;IACD,CAACqB,MAAM,CAACrC,YAAY,CAACwC,QAAQ,CAAC,GAAGhB,KAAS,IAAG;MACzCA,KAAK,CAACL,aAAa,GAAC,IAAI;IAC5B;EACF;AACF,CAAC,CAAC;AACF,OAAO,MAAK;EAACI,SAAS;EAACE,UAAU;EAACO;AAAe,CAAC,GAAEZ,SAAS,CAACqB,OAAO;AACrE,eAAerB,SAAS,CAACsB,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}